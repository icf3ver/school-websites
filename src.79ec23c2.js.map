{"version":3,"sources":["../src/index.ts"],"names":[],"mappings":"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","file":"src.79ec23c2.js","sourceRoot":"..","sourcesContent":["let API_URL: string;\n\nif (process.env.NODE_ENV === 'production') {\n    API_URL = \"https://api.school-websites.littletitan.org/\";\n} else {\n    API_URL = \"http://localhost:8000/\";\n}\nfunction apiUrl() {\n    return API_URL + window.location.hash.substring(1);\n}\n\ninterface Subtitle{\n    type: \"subtitle\",\n    text: string,\n}\n\ninterface Text{\n    type: \"text\",\n    text: string,\n}\n\ninterface Img{\n    type: \"img\",\n    name: string,\n}\n\ninterface Wrapimg{\n    type: \"wrapimg\",\n    name: string,\n    side: \"left\" | \"right\",\n    width: string,\n}\n\ninterface DefaultResponse {\n    type: \"default\",\n    classes: Record<string, string[]>\n}\n\ninterface ClassResponse {\n    type: \"class\",\n    \"class-name\": string,\n    pages: string[]\n}\n\ninterface PageResponse {\n    type: \"page\",\n    title: string,\n    author: string,\n    elem: (Subtitle | Text | Img | Wrapimg)[]\n}\n\ntype ResponseJson = DefaultResponse | ClassResponse | PageResponse;\n\nwindow.addEventListener(\"load\", handler);\nwindow.addEventListener(\"hashchange\", handler, false);\n\nasync function handler() {\n    let content = document.getElementById(\"content\");\n    let menu = document.getElementById(\"menu\");\n\n    if (menu != null) {\n        let menu_data_request = await fetch(API_URL);\n        // if (!menu_data_request.ok) {\n        //     // show the user some error!~\n        // }\n        let obj: DefaultResponse = await menu_data_request.json();\n        console.log(obj);\n\n        let wrapper = document.createElement(\"ul\");\n        if (obj.type == 'default'){\n            for (let [class_name, class_items] of Object.entries(obj.classes)) {\n            \n                let cls = document.createElement(\"li\");\n                cls.className = \"item\";\n    \n                let link_1 = document.createElement(\"a\");\n                link_1.href = \"#/\" + class_name;\n                link_1.innerText = class_name.replace(\"-\", \" \");\n                let wrapper2 = document.createElement(\"ul\");\n                wrapper2.className = \"submenu\";\n                for (let p = 0; p < class_items.length; p++) {\n                    let page = document.createElement(\"li\");\n                    let link_2 = document.createElement(\"a\");\n                    link_2.href = \"#/\" + class_name + \"/\" + class_items[p];\n                    link_2.innerText = class_items[p].replace(\"-\", \" \");\n                    page.appendChild(link_2);\n    \n                    wrapper2.appendChild(page);\n                }\n                cls.appendChild(link_1);\n                cls.appendChild(wrapper2);\n                wrapper.appendChild(cls);\n            }\n            menu.innerHTML = \"\";\n            menu.appendChild(wrapper);\n        }\n        \n    }\n\n    if (content != null) {\n        let content_request = await fetch(apiUrl());\n\n        let obj: ResponseJson = await content_request.json();\n        console.log(obj);\n\n        if (obj.type == 'default') {\n            content.innerHTML = \"<h1>Main</h1>\";\n\n            let wrapper = document.createElement(\"ul\");\n            for (let [class_name, class_items] of Object.entries(obj.classes)) {\n                let cls = document.createElement(\"li\");\n                cls.className = \"item\";\n\n                let link_1 = document.createElement(\"a\");\n                link_1.href = \"#/\" + class_name;\n                link_1.innerText = class_name.replace(\"-\", \" \");\n                let wrapper2 = document.createElement(\"ul\");\n                wrapper2.className = \"submenu\";\n\n                for (let class_item of class_items) {\n                    let page = document.createElement(\"li\");\n                    let link_2 = document.createElement(\"a\");\n                    link_2.href = \"#/\" + class_name + \"/\" + class_item;\n                    link_2.innerText = class_item.replace(\"-\", \" \");\n                    page.appendChild(link_2);\n\n                    wrapper2.appendChild(page);\n                }\n                cls.appendChild(link_1);\n                cls.appendChild(wrapper2);\n                wrapper.appendChild(cls);\n            }\n            content.innerHTML = \"<h1>Main</h1>\";\n            content.appendChild(wrapper);\n        } else if (obj.type == 'class') {\n            let wrapper = document.createElement(\"ul\");\n            for (let page of obj.pages) {\n                let p = document.createElement(\"li\");\n                let link = document.createElement(\"a\");\n                link.href = \"#/\" + obj[\"class-name\"] + \"/\" + page;\n                link.innerText = page.replace(\"-\", \" \");\n                p.appendChild(link);\n\n                wrapper.appendChild(p);\n            }\n\n            content.innerHTML = \"<h1>\" + obj[\"class-name\"].charAt(0).toUpperCase() + obj[\"class-name\"].slice(1) + \"</h1>\";\n            content.appendChild(wrapper);\n        } else if (obj.type == 'page') {\n            //content is wrapper\n            content.innerHTML = \"\";\n\n            let title = document.createElement(\"h1\");\n            title.innerText = obj.title;\n            content.appendChild(title);\n\n            let author = document.createElement(\"h5\");\n            author.innerText = \"by: \" + obj.author;\n            author.style.marginTop = \"0%\";\n            content.appendChild(author);\n\n            for (let elem of obj.elem) {\n                if (elem.type == \"subtitle\") {\n                    let subtitle = document.createElement(\"h3\");\n                    subtitle.innerText = elem.text;\n                    content.appendChild(subtitle);\n                } else if (elem.type == \"text\") {\n                    let text = document.createElement(\"h4\");\n                    text.innerText = elem.text;\n                    content.appendChild(text);\n                } else if (elem.type == \"img\") {\n                    let img = document.createElement(\"img\");\n                    img.src = API_URL + \"/img/\" + elem.name;\n                    img.style.width = \"100%\";\n                    content.appendChild(img);\n                } else if (elem.type == \"wrapimg\") {\n                    let left = document.createElement(\"div\");\n                    let right = document.createElement(\"div\");\n\n                    let img = document.createElement(\"img\");\n                    img.src = API_URL + \"/img/\" + elem.name;\n                    img.style.width = \"100%\";\n\n                    if (elem.side == \"right\") {\n                        right.style.float = \"right\";\n                        left.style.float = \"right\";\n                        right.appendChild(img);\n                        right.style.width = elem.width;\n                        left.style.width = 99 - parseInt(elem.width.substring(0,2)) + \"%\";\n                        \n                        right.style.paddingLeft = \"1%\";\n\n                        content.appendChild(right);\n                        content.appendChild(left);\n                    } else {\n                        right.style.float = \"left\";\n                        left.style.float = \"left\";\n                        left.appendChild(img);\n                        left.style.width = elem.width;\n                        right.style.width = 99 - parseInt(elem.width.substring(0,2)) + \"%\";\n\n                        left.style.paddingRight = \"1%\";\n\n                        content.appendChild(left);\n                        content.appendChild(right);\n\n                    }\n                }\n            }\n        }\n    }\n};"]}