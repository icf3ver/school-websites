{"mappings":"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","sources":["src/index.ts"],"sourcesContent":["let development: boolean = false;\n\nlet API_URL: string;\n\nif (!development) {\n    API_URL = \"http://littletitan.org:8080/\";\n} else {\n    API_URL = \"http://localhost:8000/\";\n}\n\nfunction apiUrl() {\n    return API_URL + window.location.hash.substring(1);\n}\n\ninterface Navbar{\n    type: \"navbar\",\n    navelem: (Navelem)[]\n}\ninterface Navelem{\n    name: string,\n    link: string,\n}\n\ninterface Subtitle{\n    type: \"subtitle\",\n    text: string,\n}\n\ninterface Text{\n    type: \"text\",\n    text: string,\n}\n\ninterface Img{\n    type: \"img\",\n    name: string,\n}\n\ninterface Wrapimg{\n    type: \"wrapimg\",\n    name: string,\n    side: \"left\" | \"right\",\n    width: string,\n}\n\ninterface Citation{\n    type: \"citation\",\n    text: string,\n}\n\ninterface DefaultResponse {\n    type: \"default\",\n    classes: Record<string, string[]>\n}\n\ninterface ClassResponse {\n    type: \"class\",\n    \"class-name\": string,\n    pages: string[]\n}\n\ninterface PageResponse {\n    type: \"page\",\n    title: string,\n    author: string,\n    elem: (Navbar | Subtitle | Text | Img | Wrapimg | Citation)[]\n}\n\ntype ResponseJson = DefaultResponse | ClassResponse | PageResponse;\n\nwindow.addEventListener(\"load\", handler);\nwindow.addEventListener(\"hashchange\", handler, false);\n\nasync function handler() {\n    let root_url = window.location.hash.split(\"%2F\")[0];\n\n    let content = document.getElementById(\"content\");\n    let menu = document.getElementById(\"menu\");\n\n    if (menu != null) {\n        let menu_data_request = await fetch(API_URL);\n        // if (!menu_data_request.ok) {\n        //     // show the user some error!~\n        // }\n        let obj: DefaultResponse = await menu_data_request.json();\n        console.log(obj);\n\n        let wrapper = document.createElement(\"ul\");\n        if (obj.type == 'default'){\n            for (let [class_name, class_items] of Object.entries(obj.classes)) {\n            \n                let cls = document.createElement(\"li\");\n                cls.className = \"item\";\n    \n                let link_1 = document.createElement(\"a\");\n                link_1.href = \"#/\" + class_name;\n                link_1.innerText = class_name.replace(\"-\", \" \");\n                let wrapper2 = document.createElement(\"ul\");\n                wrapper2.className = \"submenu\";\n                for (let p = 0; p < class_items.length; p++) {\n                    let page = document.createElement(\"li\");\n                    let link_2 = document.createElement(\"a\");\n                    link_2.href = \"#/\" + class_name + \"/\" + class_items[p];\n                    link_2.innerText = class_items[p].replace(\"-\", \" \");\n                    page.appendChild(link_2);\n    \n                    wrapper2.appendChild(page);\n                }\n                cls.appendChild(link_1);\n                cls.appendChild(wrapper2);\n                wrapper.appendChild(cls);\n            }\n            menu.innerHTML = \"\";\n            menu.appendChild(wrapper);\n        }\n        \n    }\n\n    if (content != null) {\n        let content_request = await fetch(apiUrl());\n\n        let obj: ResponseJson = await content_request.json();\n        console.log(obj);\n\n        if (obj.type == 'default') {\n            content.innerHTML = \"<h1>Main</h1>\";\n\n            let wrapper = document.createElement(\"ul\");\n            for (let [class_name, class_items] of Object.entries(obj.classes)) {\n                let cls = document.createElement(\"li\");\n                cls.className = \"item\";\n\n                let link_1 = document.createElement(\"a\");\n                link_1.href = \"#/\" + class_name;\n                link_1.innerText = class_name.replace(\"-\", \" \");\n                let wrapper2 = document.createElement(\"ul\");\n                wrapper2.className = \"submenu\";\n\n                for (let class_item of class_items) {\n                    let page = document.createElement(\"li\");\n                    let link_2 = document.createElement(\"a\");\n                    link_2.href = \"#/\" + class_name + \"/\" + class_item;\n                    link_2.innerText = class_item.replace(\"-\", \" \");\n                    page.appendChild(link_2);\n\n                    wrapper2.appendChild(page);\n                }\n                cls.appendChild(link_1);\n                cls.appendChild(wrapper2);\n                wrapper.appendChild(cls);\n            }\n            content.innerHTML = \"<h1>Main</h1>\";\n            content.appendChild(wrapper);\n        } else if (obj.type == 'class') {\n            let wrapper = document.createElement(\"ul\");\n            for (let page of obj.pages) {\n                let p = document.createElement(\"li\");\n                let link = document.createElement(\"a\");\n                link.href = \"#/\" + obj[\"class-name\"] + \"/\" + page;\n                link.innerText = page.replace(\"-\", \" \");\n                p.appendChild(link);\n\n                wrapper.appendChild(p);\n            }\n\n            content.innerHTML = \"<h1>\" + obj[\"class-name\"].charAt(0).toUpperCase() + obj[\"class-name\"].slice(1) + \"</h1>\";\n            content.appendChild(wrapper);\n        } else if (obj.type == 'page') {\n            //content is wrapper\n            content.innerHTML = \"\";\n\n            let title = document.createElement(\"h1\");\n            title.innerText = obj.title;\n            content.appendChild(title);\n\n            let author = document.createElement(\"h5\");\n            author.innerText = \"by: \" + obj.author;\n            author.style.marginTop = \"0%\";\n            content.appendChild(author);\n\n            for (let elem of obj.elem) {\n                if (elem.type == \"navbar\") {\n                    let navbar = document.createElement(\"div\");\n                    navbar.className = \"navbar\";\n                    let is_first = true;\n                    for (let navelem of elem.navelem) {\n                        let navelem_container = document.createElement(\"div\");\n                        if (!is_first) {\n                            let spacer = document.createElement(\"div\");\n                            spacer.innerText = \" | \";\n                            spacer.className = \"navelem-spacer\";\n                            navbar.appendChild(spacer);\n                        }\n                        let link = document.createElement(\"a\");\n                        link.className = \"navelem\";\n                        link.innerText = navelem.name;\n                        link.href = root_url + navelem.link;\n                        navbar.appendChild(link);\n                        is_first = false;\n                    }\n                    content.appendChild(navbar);\n                } else if (elem.type == \"subtitle\") {\n                    let subtitle = document.createElement(\"h3\");\n                    subtitle.innerText = elem.text;\n                    content.appendChild(subtitle);\n                } else if (elem.type == \"text\") {\n                    let text = document.createElement(\"h4\");\n                    text.innerText = elem.text;\n                    content.appendChild(text);\n                } else if (elem.type == \"img\") {\n                    let img = document.createElement(\"img\");\n                    img.src = API_URL + \"/img/\" + elem.name;\n                    img.style.width = \"100%\";\n                    content.appendChild(img);\n                } else if (elem.type == \"wrapimg\") {\n                    let left = document.createElement(\"div\");\n                    let right = document.createElement(\"div\");\n\n                    let img = document.createElement(\"img\");\n                    img.src = API_URL + \"/img/\" + elem.name;\n                    img.style.width = \"100%\";\n\n                    if (elem.side == \"right\") {\n                        right.style.float = \"right\";\n                        left.style.float = \"right\";\n                        right.appendChild(img);\n                        right.style.width = elem.width;\n                        left.style.width = 99 - parseInt(elem.width.substring(0,2)) + \"%\";\n                        \n                        right.style.paddingLeft = \"1%\";\n\n                        content.appendChild(right);\n                        content.appendChild(left);\n                    } else {\n                        right.style.float = \"left\";\n                        left.style.float = \"left\";\n                        left.appendChild(img);\n                        left.style.width = elem.width;\n                        right.style.width = 99 - parseInt(elem.width.substring(0,2)) + \"%\";\n\n                        left.style.paddingRight = \"1%\";\n\n                        content.appendChild(left);\n                        content.appendChild(right);\n\n                    }\n                } else if (elem.type == \"citation\") {\n                    let citation = document.createElement(\"p\");\n                    citation.className = \"citation\"\n                    citation.innerText = elem.text;\n                    content.appendChild(citation);\n                }\n            }\n        }\n    }\n};"],"names":["API_URL","development","apiUrl","window","location","hash","substring","async","handler","root_url","split","content","document","getElementById","menu","menu_data_request","fetch","obj","json","console","log","wrapper","createElement","type","class_name","class_items","Object","entries","classes","cls","className","link_1","href","innerText","replace","wrapper2","p","length","page","link_2","appendChild","innerHTML","content_request","class_item","pages","link","charAt","toUpperCase","slice","title","author","style","marginTop","elem","navbar","is_first","navelem","spacer","name","subtitle","text","img","src","width","left","right","side","float","parseInt","paddingLeft","paddingRight","citation","addEventListener"],"version":3,"file":"index.7c468229.js.map"}