{"mappings":"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","sources":["src/index.ts"],"sourcesContent":["let development: boolean = false;\n\nlet API_URL: string;\n\nif (!development) {\n    API_URL = \"http://littletitan.org:8080/\";\n} else {\n    API_URL = \"http://localhost:8000/\";\n}\n\nfunction apiUrl() {\n    return API_URL + window.location.hash.substring(1);\n}\n\ninterface Subtitle{\n    type: \"subtitle\",\n    text: string,\n}\n\ninterface Text{\n    type: \"text\",\n    text: string,\n}\n\ninterface Img{\n    type: \"img\",\n    name: string,\n}\n\ninterface Wrapimg{\n    type: \"wrapimg\",\n    name: string,\n    side: \"left\" | \"right\",\n    width: string,\n}\n\ninterface DefaultResponse {\n    type: \"default\",\n    classes: Record<string, string[]>\n}\n\ninterface ClassResponse {\n    type: \"class\",\n    \"class-name\": string,\n    pages: string[]\n}\n\ninterface PageResponse {\n    type: \"page\",\n    title: string,\n    author: string,\n    elem: (Subtitle | Text | Img | Wrapimg)[]\n}\n\ntype ResponseJson = DefaultResponse | ClassResponse | PageResponse;\n\nwindow.addEventListener(\"load\", handler);\nwindow.addEventListener(\"hashchange\", handler, false);\n\nasync function handler() {\n    let content = document.getElementById(\"content\");\n    let menu = document.getElementById(\"menu\");\n\n    if (menu != null) {\n        let menu_data_request = await fetch(API_URL);\n        // if (!menu_data_request.ok) {\n        //     // show the user some error!~\n        // }\n        let obj: DefaultResponse = await menu_data_request.json();\n        console.log(obj);\n\n        let wrapper = document.createElement(\"ul\");\n        if (obj.type == 'default'){\n            for (let [class_name, class_items] of Object.entries(obj.classes)) {\n            \n                let cls = document.createElement(\"li\");\n                cls.className = \"item\";\n    \n                let link_1 = document.createElement(\"a\");\n                link_1.href = \"#/\" + class_name;\n                link_1.innerText = class_name.replace(\"-\", \" \");\n                let wrapper2 = document.createElement(\"ul\");\n                wrapper2.className = \"submenu\";\n                for (let p = 0; p < class_items.length; p++) {\n                    let page = document.createElement(\"li\");\n                    let link_2 = document.createElement(\"a\");\n                    link_2.href = \"#/\" + class_name + \"/\" + class_items[p];\n                    link_2.innerText = class_items[p].replace(\"-\", \" \");\n                    page.appendChild(link_2);\n    \n                    wrapper2.appendChild(page);\n                }\n                cls.appendChild(link_1);\n                cls.appendChild(wrapper2);\n                wrapper.appendChild(cls);\n            }\n            menu.innerHTML = \"\";\n            menu.appendChild(wrapper);\n        }\n        \n    }\n\n    if (content != null) {\n        let content_request = await fetch(apiUrl());\n\n        let obj: ResponseJson = await content_request.json();\n        console.log(obj);\n\n        if (obj.type == 'default') {\n            content.innerHTML = \"<h1>Main</h1>\";\n\n            let wrapper = document.createElement(\"ul\");\n            for (let [class_name, class_items] of Object.entries(obj.classes)) {\n                let cls = document.createElement(\"li\");\n                cls.className = \"item\";\n\n                let link_1 = document.createElement(\"a\");\n                link_1.href = \"#/\" + class_name;\n                link_1.innerText = class_name.replace(\"-\", \" \");\n                let wrapper2 = document.createElement(\"ul\");\n                wrapper2.className = \"submenu\";\n\n                for (let class_item of class_items) {\n                    let page = document.createElement(\"li\");\n                    let link_2 = document.createElement(\"a\");\n                    link_2.href = \"#/\" + class_name + \"/\" + class_item;\n                    link_2.innerText = class_item.replace(\"-\", \" \");\n                    page.appendChild(link_2);\n\n                    wrapper2.appendChild(page);\n                }\n                cls.appendChild(link_1);\n                cls.appendChild(wrapper2);\n                wrapper.appendChild(cls);\n            }\n            content.innerHTML = \"<h1>Main</h1>\";\n            content.appendChild(wrapper);\n        } else if (obj.type == 'class') {\n            let wrapper = document.createElement(\"ul\");\n            for (let page of obj.pages) {\n                let p = document.createElement(\"li\");\n                let link = document.createElement(\"a\");\n                link.href = \"#/\" + obj[\"class-name\"] + \"/\" + page;\n                link.innerText = page.replace(\"-\", \" \");\n                p.appendChild(link);\n\n                wrapper.appendChild(p);\n            }\n\n            content.innerHTML = \"<h1>\" + obj[\"class-name\"].charAt(0).toUpperCase() + obj[\"class-name\"].slice(1) + \"</h1>\";\n            content.appendChild(wrapper);\n        } else if (obj.type == 'page') {\n            //content is wrapper\n            content.innerHTML = \"\";\n\n            let title = document.createElement(\"h1\");\n            title.innerText = obj.title;\n            content.appendChild(title);\n\n            let author = document.createElement(\"h5\");\n            author.innerText = \"by: \" + obj.author;\n            author.style.marginTop = \"0%\";\n            content.appendChild(author);\n\n            for (let elem of obj.elem) {\n                if (elem.type == \"subtitle\") {\n                    let subtitle = document.createElement(\"h3\");\n                    subtitle.innerText = elem.text;\n                    content.appendChild(subtitle);\n                } else if (elem.type == \"text\") {\n                    let text = document.createElement(\"h4\");\n                    text.innerText = elem.text;\n                    content.appendChild(text);\n                } else if (elem.type == \"img\") {\n                    let img = document.createElement(\"img\");\n                    img.src = API_URL + \"/img/\" + elem.name;\n                    img.style.width = \"100%\";\n                    content.appendChild(img);\n                } else if (elem.type == \"wrapimg\") {\n                    let left = document.createElement(\"div\");\n                    let right = document.createElement(\"div\");\n\n                    let img = document.createElement(\"img\");\n                    img.src = API_URL + \"/img/\" + elem.name;\n                    img.style.width = \"100%\";\n\n                    if (elem.side == \"right\") {\n                        right.style.float = \"right\";\n                        left.style.float = \"right\";\n                        right.appendChild(img);\n                        right.style.width = elem.width;\n                        left.style.width = 99 - parseInt(elem.width.substring(0,2)) + \"%\";\n                        \n                        right.style.paddingLeft = \"1%\";\n\n                        content.appendChild(right);\n                        content.appendChild(left);\n                    } else {\n                        right.style.float = \"left\";\n                        left.style.float = \"left\";\n                        left.appendChild(img);\n                        left.style.width = elem.width;\n                        right.style.width = 99 - parseInt(elem.width.substring(0,2)) + \"%\";\n\n                        left.style.paddingRight = \"1%\";\n\n                        content.appendChild(left);\n                        content.appendChild(right);\n\n                    }\n                }\n            }\n        }\n    }\n};"],"names":["API_URL","development","apiUrl","window","location","hash","substring","async","handler","content","document","getElementById","menu","menu_data_request","fetch","obj","json","console","log","wrapper","createElement","type","class_name","class_items","Object","entries","classes","cls","className","link_1","href","innerText","replace","wrapper2","p","length","page","link_2","appendChild","innerHTML","content_request","class_item","pages","link","charAt","toUpperCase","slice","title","author","style","marginTop","elem","subtitle","text","img","src","name","width","left","right","side","float","parseInt","paddingLeft","paddingRight","addEventListener"],"version":3,"file":"index.d7a47110.js.map"}